<style>
    * {
        box-sizing: border-box;
        padding: 0;
        margin: 0;
    }
  body, .page-width{
    padding: 0 !important;
  }
  input[type=text], input[type=button], input[type=submit] {
-webkit-appearance: none;
-webkit-border-radius: 0;
}
    .logo-wrapper-pass img {
    width: {{ section.settings.logo-size }}px;
    max-width: 100%;
  }
  .enter-password-container {
    z-index: 10;
}
  
    .intro {
        display: flex;
        justify-content: center;
        flex-direction: column;
        align-items: center;
        height: 100vh;
        position: relative;
        {% if section.settings.pass-background == 'color' %}
        background: {{ section.settings.pass-background-color }};
        {% elsif section.settings.pass-background == 'image' %}
        background: url('{{ section.settings.pass-background-image | img_url: 'master' }}');
        background-size: cover;
        background-attachment: fixed;
        background-position: center center;
        {% elsif section.settings.pass-background == 'gradient' %}
        background: {{ section.settings.pass-background-gradient }};
        {% endif %}  
    }
    {% if section.settings.pass-background == 'image' %}
      .intro:before{
        content: "";
        position: fixed;
        left: 0;
        top: 0;
        height: 100vh;
        width: 100%;
        background: rgb(0 0 0 / {{ section.settings.bg-overlay }}%);
      }
    .intro>* {
      z-index: 5;
    }
    {% endif %}
    .password-intro {
      display: none;
      display: flex;
      flex-direction: column;
      align-items: end;
    }
    .storefront-password-form {
        display: flex;
    }
    .input-group {
        display: flex;
    }
    .intro__email-label {
        display: block;
        width: 100%;
        margin-bottom: 10px;
        font-size: 20px;
        text-align: center;
    }
    .intro__text-input {
        display: block;
        width: 300px;
        padding: 11px 18px;
        font-size: 14px;
        background-color: {{ section.settings.input-bg }};
        border: 1px solid;
        color: {{ section.settings.input-text }};
      border-radius: 0;
    }
    .intro__btn-input {
        padding: 12px 18px;
      height: 100%;
          height: auto;
      cursor: pointer;
    min-height: 100%;
        font-size: 14px;
        border: none;
        border-radius: 0;
        background: {{ section.settings.pass-button-bg }};
        color: {{ section.settings.pass-button-color }};
    }
    .intro__password-link {
        display: block;
        width: 200px;
        bottom: -40px;
        left: calc(50% - 100px);
        font-size: 14px;
        text-align: center;
        color: {{ section.settings.pass-text-color }};
        cursor: pointer;
    }
  .enter-password-container {
    background: {{ section.settings.popup-bg }};
    height: 100vh;
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    justify-content: center;
    align-items: center;
    display: none;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
}
    .intro__new-title {
        display: none;
        width: 200px;
        font-size: 17px;
        text-align: center;
        color: {{ section.settings.pass-text-color }};
    }
    .intro__form-div {
        display: none;
    }
    .intro__close-btn {
        display: block;
        width: 30px;
        height: 30px;
        background-color: rgba(0, 0, 0, 0);
        border: none;
        cursor: pointer;
        margin-bottom: 20px;
    }
    .intro__form-div svg {
        width: 30px;
        height: 30px;
    }
    .logo-wrapper-pass{
      width: 100%;
      display: flex;
      justify-content: center;
      flex-direction: column;
    align-items: center;
    }
  .pass-announcement{
    text-align: center;
    font-size: 18px;
    padding: 0 15px;
    color: {{ section.settings.pass-text-color }};
  }
  .intro > * {
    margin-top: {{ section.settings.margin-top }}px;
    margin-bottom: {{ section.settings.margin-bottom }}px;
  }
    @media(max-width: 749px) {
        .intro__text-input {
            width: 170px;
        }
    }
    @media screen and (max-width: 500px) {
    .logo-wrapper-pass img {
      width: {{ section.settings.logo-size-mobile }}px;
    }
  }
  #countdown-timer {
    text-align: center;
    display: flex;
    flex-direction: row;
    gap: 20px;
    align-items: center;
  }
  #countdown-timer h2{
    font-size: 28px;
    color: {{ section.settings.timer-text-color }};
  }
  #countdown-timer span{
    font-size: 13px;
    color: {{ section.settings.pass-text-color }};
  }
</style>
<div class="page-width">
  <div class="intro">
     {% for block in section.blocks %}
          {% case block.type %}
            {% when 'logo' %}
      <div class="logo-wrapper-pass">
        {%- if section.settings.logo != blank -%}
          <img class="pass-logo" src="{{ section.settings.logo | img_url: 'master' }}" alt="{{ shop.name }}" loading="eager">
        {%- endif -%}
      </div>
      {% when 'announcement' %}
        {%- if section.settings.announcement-text != blank -%}
          <h2 class="pass-announcement">{{ section.settings.announcement-text }}</h2>
        {%- endif -%}
      {% when 'email-signup' %}
    <div class='intro__content email-intro'>
        <form method="post" action="/contact#contact_form" id="contact_form" accept-charset="UTF-8" class="contact-form">
            <input type="hidden" name="form_type" value="customer">
            <input type="hidden" name="utf8" value="âœ“">
  
            <p class="password-signup-form__heading h3"></p>
  
            <input type="hidden" name="contact[tags]" value="prospect, password page">
  
            <div class="input-group">
              <input type="email" name="contact[email]" id="Email" class="input-group__field intro__text-input" placeholder="Your email">
              <span class="input-group__btn">
                <button class='btn intro__btn-input' type="submit" name="commit">
                  <span>Subscribe</span>
                </button>
              </span>
            </div>
        </form>
  </div>
       {% when 'custom-liquid' %}
        <div class="pass-custom-liquid">
          {{ block.settings.custom_liquid }}
        </div>
      {% when 'countdown-timer' %}
      <div id="countdown-timer">
        <div class="count-cont"><h2 id="days">00</h2> <span>days</span></div>
        <div class="count-cont"><h2 id="hours">00</h2> <span>hours</span></div>
        <div class="count-cont"><h2 id="minutes">00</h2> <span>minutes</span></div>
        <div class="count-cont"><h2 id="seconds">00</h2> <span>seconds</span></div>
      </div>

        
      {% when 'password' %}
      <a class='intro__password-link'>Enter using password</a>
  <div class="enter-password-container">
  <div class='intro__content password-intro'>
    <button class='intro__close-btn'>
          <svg class="svg-icon" viewBox="0 0 20 20">
              <path fill='{{ section.settings.pass-text-color }}' d="M10.185,1.417c-4.741,0-8.583,3.842-8.583,8.583c0,4.74,3.842,8.582,8.583,8.582S18.768,14.74,18.768,10C18.768,5.259,14.926,1.417,10.185,1.417 M10.185,17.68c-4.235,0-7.679-3.445-7.679-7.68c0-4.235,3.444-7.679,7.679-7.679S17.864,5.765,17.864,10C17.864,14.234,14.42,17.68,10.185,17.68 M10.824,10l2.842-2.844c0.178-0.176,0.178-0.46,0-0.637c-0.177-0.178-0.461-0.178-0.637,0l-2.844,2.841L7.341,6.52c-0.176-0.178-0.46-0.178-0.637,0c-0.178,0.176-0.178,0.461,0,0.637L9.546,10l-2.841,2.844c-0.178,0.176-0.178,0.461,0,0.637c0.178,0.178,0.459,0.178,0.637,0l2.844-2.841l2.844,2.841c0.178,0.178,0.459,0.178,0.637,0c0.178-0.176,0.178-0.461,0-0.637L10.824,10z"></path>
          </svg>
      </button>
      {% form 'storefront_password' %}
          <input class='intro__text-input' type="password" name="password" placeholder='Password'>
          <input class='intro__btn-input' type="submit" value="Enter">
      {% endform %}
      
  </div>
  </div>
 <h2 class='intro__new-title'>Thanks for your subscription</h2>
      {% endcase %}
     {% endfor %}
  </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', function () {
    const passwordLink = document.querySelector('.intro__password-link');
    const closeBtn = document.querySelector('.intro__close-btn');
    const passPopup = document.querySelector('.enter-password-container');
    const passwordIntro = document.querySelector('.password-intro');
    const newTitle = document.querySelector('.intro__new-title');
    const emailIntro = document.querySelector('.email-intro');
    const passAnnouncement = document.querySelector('.pass-announcement');

    function showPasswordPopup(event) {
        event.preventDefault(); 
        if (passPopup && passwordIntro) {
            passPopup.style.display = 'flex';
            passwordIntro.style.display = 'flex';
        }
    }

    function hidePasswordPopup() {
        if (passPopup && passwordIntro) {
            passPopup.style.display = 'none';
            passwordIntro.style.display = 'none';
        }
    }

    function handleCustomerPosted() {
        if (window.location.search.includes('?customer_posted=true')) {
            if (emailIntro) emailIntro.style.display = 'none';
            if (passwordIntro) passwordIntro.style.display = 'none';
            if (newTitle) newTitle.style.display = 'block';
            if (passAnnouncement) passAnnouncement.style.display = 'none';
        }
    }

    if (passwordLink) {
        passwordLink.addEventListener('click', showPasswordPopup);
    }

    if (closeBtn) {
        closeBtn.addEventListener('click', hidePasswordPopup);
    }

    handleCustomerPosted();
});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const timerElement = document.getElementById("countdown-timer");

  const countdownDateSetting = "{{ section.settings.countdown_date | escape }}";
  const timezoneOffset = parseFloat("{{ section.settings.countdown_timezone | escape }}") || 0;

  if (!countdownDateSetting || countdownDateSetting.trim() === "") {
    timerElement.textContent = "Date not set. Please check your settings.";
    return;
  }

  function parseDateToUTC(dateStr, timezoneOffset) {
    const [datePart, timePart, period] = dateStr.split(" ");
    if (!datePart || !timePart || !period) {
      timerElement.textContent = "Invalid date format. Use YYYY-MM-DD hh:mm AM/PM.";
      throw new Error("Invalid date format");
    }

    const [year, month, day] = datePart.split("-").map(Number);
    const [hoursString, minutesString] = timePart.split(":").map(Number);

    let hours = hoursString;
    const minutes = minutesString;

    if (period.toUpperCase() === "PM" && hours < 12) hours += 12;
    if (period.toUpperCase() === "AM" && hours === 12) hours = 0;

    const localDate = new Date(Date.UTC(year, month - 1, day, hours, minutes));

    return new Date(localDate.getTime() - timezoneOffset * 60 * 60 * 1000);
  }

  let targetDate;
  try {
    targetDate = parseDateToUTC(countdownDateSetting, timezoneOffset);
  } catch (error) {
    console.error("Error parsing date:", error);
    timerElement.textContent = "Error with countdown date.";
    return;
  }

function updateTimer() {
  const now = new Date();
  const timeDifference = targetDate - now;

  if (timeDifference <= 0) {
    timerElement.innerHTML = `
      <div class="count-cont"><h2 id="days">00</h2> <span>days</span></div>
      <div class="count-cont"><h2 id="hours">00</h2> <span>hours</span></div>
      <div class="count-cont"><h2 id="minutes">00</h2> <span>minutes</span></div>
      <div class="count-cont"><h2 id="seconds">00</h2> <span>seconds</span></div>
    `;
    clearInterval(timerInterval); 
    return;
  }

  const days = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
  const hours = Math.floor(
    (timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
  );
  const minutes = Math.floor((timeDifference % (1000 * 60 * 60)) / (1000 * 60));
  const seconds = Math.floor((timeDifference % (1000 * 60)) / 1000);

  timerElement.innerHTML = `
    <div class="count-cont"><h2 id="days">${days}</h2> <span>days</span></div>
    <div class="count-cont"><h2 id="hours">${hours}</h2> <span>hours</span></div>
    <div class="count-cont"><h2 id="minutes">${minutes}</h2> <span>minutes</span></div>
    <div class="count-cont"><h2 id="seconds">${seconds}</h2> <span>seconds</span></div>
  `;
}


  const timerInterval = setInterval(updateTimer, 1000);
  updateTimer();
});
</script>

{% schema %}
  {
    "name": "Password Template",
    "settings": [
      {
        "type": "image_picker",
        "id": "logo",
        "label": "Logo"
      },
      {
        "type": "range",
        "id": "logo-size",
        "min": 50,
        "max": 400,
        "step": 5,
        "default": 150,
        "unit": "px",
        "label": "Logo size"
      },
      {
      "type": "range",
      "id": "logo-size-mobile",
      "min": 50,
      "max": 300,
      "step": 5,
      "default": 100,
      "unit": "px",
      "label": "Mobile logo size"
      },
      {
        "type": "header",
        "content": "Announcement"
      },
      {
        "type": "text",
        "id": "announcement-text",
        "label": "Announcement text"
      },
      {
        "type": "header",
        "content": "Countdown timer"
      },
      {
      "type": "text",
      "id": "countdown_date",
      "label": "End Date",
      "info": "Enter the date in the format YYYY-MM-DD hh:mm AM/PM (e.g., 2024-12-31 11:59 PM)"
    },
    {
      "type": "select",
      "id": "countdown_timezone",
      "label": "Timezone",
      "options": [
        { "value": "-12", "label": "GMT -12:00 International Date Line West" },
        { "value": "-11", "label": "GMT -11:00 Midway Island, Samoa" },
        { "value": "-10", "label": "GMT -10:00 Hawaii" },
        { "value": "-9", "label": "GMT -09:00 Alaska" },
        { "value": "-8", "label": "GMT -08:00 Pacific Time (US & Canada)" },
        { "value": "-7", "label": "GMT -07:00 Mountain Time (US & Canada)" },
        { "value": "-6", "label": "GMT -06:00 Central Time (US & Canada)" },
        { "value": "-5", "label": "GMT -05:00 Eastern Time (US & Canada)" },
        { "value": "-4", "label": "GMT -04:00 Atlantic Time (Canada)" },
        { "value": "-3.5", "label": "GMT -03:30 Newfoundland" },
        { "value": "-3", "label": "GMT -03:00 Brazil, Buenos Aires, Georgetown" },
        { "value": "-2", "label": "GMT -02:00 Mid-Atlantic" },
        { "value": "-1", "label": "GMT -01:00 Azores, Cape Verde Islands" },
        { "value": "0", "label": "GMT 0:00 London, Lisbon, Casablanca" },
        { "value": "1", "label": "GMT +01:00 Amsterdam, Berlin, Rome, Paris" },
        { "value": "2", "label": "GMT +02:00 Athens, Jerusalem, Cairo" },
        { "value": "3", "label": "GMT +03:00 Baghdad, Riyadh, Nairobi" },
        { "value": "3.5", "label": "GMT +03:30 Tehran" },
        { "value": "4", "label": "GMT +04:00 Abu Dhabi, Muscat, Baku, Tbilisi" },
        { "value": "4.5", "label": "GMT +04:30 Kabul" },
        { "value": "5", "label": "GMT +05:00 Islamabad, Karachi, Tashkent" },
        { "value": "5.5", "label": "GMT +05:30 Mumbai, Kolkata, Chennai, New Delhi" },
        { "value": "5.75", "label": "GMT +05:45 Kathmandu" },
        { "value": "6", "label": "GMT +06:00 Almaty, Dhaka, Colombo" },
        { "value": "6.5", "label": "GMT +06:30 Yangon (Rangoon)" },
        { "value": "7", "label": "GMT +07:00 Bangkok, Hanoi, Jakarta" },
        { "value": "8", "label": "GMT +08:00 Beijing, Perth, Singapore, Hong Kong" },
        { "value": "9", "label": "GMT +09:00 Tokyo, Seoul, Osaka, Sapporo, Yakutsk" },
        { "value": "9.5", "label": "GMT +09:30 Adelaide, Darwin" },
        { "value": "10", "label": "GMT +10:00 Brisbane, Melbourne, Sydney" },
        { "value": "11", "label": "GMT +11:00 Magadan, Solomon Islands, New Caledonia" },
        { "value": "12", "label": "GMT +12:00 Auckland, Wellington, Fiji" }
      ]
      },
      {
        "type": "header",
        "content": "Password Background"
      },
      {
        "type": "select",
        "id": "pass-background",
        "label": "Background type",
        "options": [
          {
            "value": "color",
            "label": "Color"
          },
          {
            "value": "gradient",
            "label": "Gradient"
          },
          {
            "value": "image",
            "label": "Image/Gif"
          }
        ]
      },
      {
        "type": "color",
        "id": "pass-background-color",
        "label": "Color",
        "default": "#FFFFFF"
      },
      {
        "type": "color_background",
        "id": "pass-background-gradient",
        "label": "Gradient"
      },
      {
        "type": "image_picker",
        "id": "pass-background-image",
        "label": "Image/Gif"
      },
      {
        "type": "range",
        "id": "bg-overlay",
        "label": "Adjust darkness",
        "min": 0,
        "max": 100,
        "step": 1,
        "default": 25,
        "unit": "%",
        "info": "For gif\/img only. Adjust darkness in case of low-quality gif or to increase the contrast of content on the site"
      },
      {
        "type": "header",
        "content": "Padding settings"
      },
      {
        "type": "range",
        "id": "margin-top",
        "min": 5,
        "max": 70,
        "step": 5,
        "default": 20,
        "unit": "px",
        "label": "Margin top",
        "info": "Distance between elements from top"
      },
      {
        "type": "range",
        "id": "margin-bottom",
        "min": 5,
        "max": 70,
        "step": 5,
        "default": 20,
        "unit": "px",
        "label": "Margin bottom",
        "info": "Distance between elements from bottom"
      },
      {
        "type": "header",
        "content": "Colors"
      },
      {
        "type": "color",
        "id": "pass-text-color",
        "label": "Text",
        "default": "#000000"
      },
      {
        "type": "color",
        "id": "timer-text-color",
        "label": "Countdown timer numbers",
        "default": "#000000"
      },
      {
        "type": "color",
        "id": "pass-button-color",
        "label": "Button text",
        "default": "#000000"
      },
      {
        "type": "color",
        "id": "pass-button-bg",
        "label": "Button bg",
        "default": "#FFFFFF"
      },
      {
        "type": "color",
        "id": "popup-bg",
        "label": "Enter with password popup bg",
        "default": "#FFFFFF"
      },
      {
        "type": "color",
        "id": "input-bg",
        "label": "Input (email & password) bg",
        "default": "#FFFFFF"
      },
      {
        "type": "color",
        "id": "input-text",
        "label": "Input (email & password) text",
        "default": "#000000"
      }
    ],
    "blocks": [
      {
        "type": "logo",
        "name": "Logo",
        "limit": 1
      },
      {
        "type": "announcement",
        "name": "Announcement",
        "limit": 1
      },
      {
        "type": "countdown-timer",
        "name": "Countdown timer",
        "limit": 1
      },
      {
        "type": "email-signup",
        "name": "Email form",
        "limit": 1
      },
      {
        "type": "custom-liquid",
        "name": "Custom liquid (SMS form)",
        "limit": 1,
        "settings": [
        {
          "type": "liquid",
          "id": "custom_liquid",
          "label": "Liquid/HTML code",
          "info": "Add app snippets such as SMS form"
        }
      ]
      },
      {
        "type": "password",
        "name": "Password",
        "limit": 1
      }
      
    ]
  }
{% endschema %}